<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Anne Freeman" />


<title>Health and Drug Use Visualizations</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>
<link href="site_libs/ionicons-2.0.1/css/ionicons.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 52px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 57px;
  margin-top: -57px;
}

.section h2 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h3 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h4 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h5 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h6 {
  padding-top: 57px;
  margin-top: -57px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Anne Freeman</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="ion ion-laptop"></span>
     
    Guided Exercises
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="exercise1.html">Men's Hair Color</a>
    </li>
    <li>
      <a href="exercise2.html">Baseball Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="ion ion-color-palette"></span>
     
    Data Exploration Labs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lab01.html">Level of Education and Cocaine Usage</a>
    </li>
    <li>
      <a href="shiny1.html">Non-violent crime and poverty rates</a>
    </li>
    <li>
      <a href="DCMigration.html">DC Migration</a>
    </li>
  </ul>
</li>
<li>
  <a href="final.html">Final Project</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://example.com">
    <span class="fa fa-question fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Health and Drug Use Visualizations</h1>
<h4 class="author"><em>Anne Freeman</em></h4>
<h4 class="date"><em>9/18/2018</em></h4>

</div>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>In this exercise, we address the question, “How do education levels differ in groups with different cocaine usage?”</p>
<p>In this document we will:<br />
* Load the data * Define different levels of cocaine usage * Create a new variable based on cocaine usage * Present a graph that can be clearly understood that addresses the question of interest</p>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>To address this question, we will use data from the 2014 National Survey on Drug Use and Health, which is conducted annually by the Substance Abuse and Mental Health Services Administration (SAMHSA), an agency in the U.S. Department of Health and Human Services (DHHS). More information about this survey can be found at ICPSR’s data archive page. The data has been prepared into a .Rdata file, so we can simply load it in the workspace with the load() command. We will also load the packages that we need – tidyverse and forcats.</p>
<p>The data object has a somewhat unpleasant name so we will copy it into full_data and delete the original object.</p>
</div>
<div id="data-manipulation" class="section level2">
<h2>Data Manipulation</h2>
<p>First we will add a variable to the full_data called coc_user_status. We will set this variable to “Never User” if a person has answered “No” to the question “Have you ever used cocaine?” as coded by the variable COCEVER. Then we split up the current and former users. We define a former user as someone who has used cocaine at least once, but not in the past 12 months. We use the variable COCREC to determine if someone is a “Former User” or a “Current User”.<br />
The table at the end confirms that anyone who answers “Yes” to having used cocaine is coded as a Current or Former User. It also confirms that current users are people who have used cocaine in the past 12 months. There are 23 NA values in the last row of the table because 12 people refused to answer and 11 people left the question blank.</p>
<pre><code># A tibble: 9 x 4
  COCEVER coc_user_status COCREC                                         n
  &lt;fct&gt;   &lt;chr&gt;           &lt;fct&gt;                                      &lt;int&gt;
1 (1) Yes Current User    (01) Within the past 30 days                 336
2 (1) Yes Current User    (02) More than 30 days ago but within the…   735
3 (1) Yes Current User    (08) Used at some point in the past 12 mo…    15
4 (1) Yes Current User    (11) Used in the past 30 days LOGICALLY A…    19
5 (1) Yes Current User    (12) Used &gt;30 days ago but within pst 12 …    12
6 (1) Yes Former User     (03) More than 12 months ago                5461
7 (1) Yes Former User     (09) Used at some point in the lifetime L…    52
8 (2) No  Never User      &lt;NA&gt;                                       48618
9 &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;                                          23</code></pre>
<p>Then we decided to create a variable, coc_year_use to provide more information on the current users and how frequently they use cocaine. We decided to create four groups and separate cocaine users based on quartiles. “Light, Current Users” fall in the first quartile, “Occasional, Current Users” fall in the second quartile, “Moderate, Current Users” fall in the third quartile, and “Heavy, Current Users” fall in the fourth quartile. The the days for quartiles were determined using the quantile() function and the data was separated with the cut() function.</p>
<pre><code>  0%  25%  50%  75% 100% 
   1    2    5   29  365 </code></pre>
<p>Then I use the coc_year_use variable to replase the coc_user_status variable for Current Users. It provides more specific information on the current users. This is accomplished in two steps. The first step finds when coc_user_status is “Curren User” and replaces “Current User” with the index of the coc_year_use, as shown by the results of the count function. The next step replaces the numbers with the proper labels.</p>
<pre><code># A tibble: 7 x 3
  coc_year_use coc_user_status     n
  &lt;fct&gt;        &lt;chr&gt;           &lt;int&gt;
1 Light        1                 139
2 Occasional   2                 232
3 Moderate     3                 255
4 Heavy        4                 271
5 &lt;NA&gt;         Former User      5513
6 &lt;NA&gt;         Never User      48618
7 &lt;NA&gt;         &lt;NA&gt;              243</code></pre>
<p>Finally I have combined enough data to create a rough graph of the cocain user status with the coloring indicating the education level. <img src="lab01_files/figure-html/roughGraph-1.png" width="672" /></p>
<p>The labels on the x-axis are out of order so I make the variable coc_user_status a factor. Then I use the function fct_relevel() to change the order of the levels in coc_user_status so that the graph will make more sense</p>
<p>The levels in education status also seem out of order as the labels go from less than high school to college and then back to 12 to 17 year olds. So I used the fct_relevel() function to relevel them. I also renamed the levels in EDUCCAT2 as the names were somewhat confusing and linked to other variables in the survey.</p>
<pre><code>[1] &quot;(1) Less than high school (IREDUC2&lt;=7 and AGE2&gt;=7)&quot;
[2] &quot;(2) High school graduate (IREDUC2=8 and AGE2&gt;=7)&quot;  
[3] &quot;(3) Some college (IREDUC2=9-10 and AGE2&gt;=7)&quot;       
[4] &quot;(4) College graduate (IREDUC2=11 and AGE2&gt;=7)&quot;     
[5] &quot;(5) 12 to 17 year olds (AGE2&lt;=6)&quot;                  </code></pre>
</div>
<div id="visual-display" class="section level2">
<h2>Visual Display</h2>
<p>In my final graph I also changed the colors and the labels so that it is easy to understand.</p>
<p><img src="lab01_files/figure-html/finalGraph-1.png" width="672" /></p>
</div>
<div id="numerical-verification" class="section level2">
<h2>Numerical Verification</h2>
<p>In order to verify that the above graph is correct, I performed the following calculations. These calculations show the percentages of education statuses in each of the cocaine status groups. The tables for each cocaine usage group with the percentage of the people falling in each education status match the proportions shown on the graph.</p>
</div>
<div id="results" class="section level2">
<h2>Results</h2>
<p>A larger proportion (~28%) of never users are 12 to 17 year olds whereas this group is barely present (~0.6%) in the former users category. College graduates composed a similar proportion of the former user group (~25.4%) and the light current user group (~25.9%). Additionally, college graduates composed similar proportions of the occasional, current user group (~21.9%) and the moderate, current user group (~19.2%). Similarly, those with some college education consist in the largest proportion in the Light, Current User Group (~35%) and the Occasional, Current User Group (~36%). 12 to 17 year olds exist in the highest proportion in the Never User group, but they exist in the second highest proportion in the Heavy, Current User Group (~9%). Addtionally, those with less than a high school education or a high school degree exist in the highest proportions in the Heavy, Current User Group.</p>
</div>
<div id="conclusions-discussion" class="section level2">
<h2>Conclusions / Discussion</h2>
<p>The group that has never used cocaine consists of the highest proportion of 12 to 17 year olds as they may never have been exposed to cocaine. Similarly, the 12 to 17 year olds have the smallest proportion in the former usage group as they are likely too young to have been exposed and tried it and then have stopped using it. College Graduates are have the largest proportions in Former User and Light, Current User. Indicating that using cocaine in the past and between 1 and 2 days a year (light, current usage), is not contraindicative to graduating college. Additionally, those with some college also have consist in the largest proportion in the Light, Current User (~35%) and the Occasional, Current User (~36%) groups. Those with a High School Education and a less than High School Education exist in the highest proportions in the Heavy, Current User Group. This would indicate that some light or occasional cocaine usage is not uncommon among those receiving or working towards receiving a college degree but excessive usage is associated with a lower education status.</p>
<p>The display shows the distributions of the different education statuses based on cocaine usage patterns. It allows for comparisions based on the relative proportions between the groups and shows how the education levels differ between the groups based on cocaine habits. Showing the data based on frequency is not perfect but the number of “Never Users” is much greater than the number of cocaine users, which is why I selected to show education satus within each cocaine usage group. I would also be interested in looking at drug habits in individuals who use cocaine and the job types of people with different cocaine usage patterns.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
