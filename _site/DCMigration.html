<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Anne Freeman" />


<title>DC Migration</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>
<link href="site_libs/ionicons-2.0.1/css/ionicons.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 52px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 57px;
  margin-top: -57px;
}

.section h2 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h3 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h4 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h5 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h6 {
  padding-top: 57px;
  margin-top: -57px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Anne Freeman</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="ion ion-laptop"></span>
     
    Guided Exercises
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="exercise1.html">Men's Hair Color</a>
    </li>
    <li>
      <a href="exercise2.html">Baseball Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="ion ion-color-palette"></span>
     
    Data Exploration Labs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lab01.html">Level of Education and Cocaine Usage</a>
    </li>
    <li>
      <a href="shiny1.html">Non-violent crime and poverty rates</a>
    </li>
    <li>
      <a href="DCMigration.html">DC Migration</a>
    </li>
  </ul>
</li>
<li>
  <a href="final.html">Final Project</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://example.com">
    <span class="fa fa-question fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">DC Migration</h1>
<h4 class="author"><em>Anne Freeman</em></h4>
<h4 class="date"><em>12/4/2018</em></h4>

</div>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>In this lab, we are exploring DC migration using data from the <a href="https://usa.ipums.org/usa/">U.S. Census</a>.Our goal is to imitate and revise the visualizations from the <a href="https://www.nytimes.com/interactive/2014/08/13/upshot/where-people-in-each-state-were-born.html">NYTimes</a>.We are creating displays showing where people born in DC lived in the decennial years between 1850 and 2000 (data from 1890 is missing).</p>
</div>
<div id="data-manipulation" class="section level2">
<h2>Data Manipulation</h2>
<p>First we load in the data sets. We have two data sets, one containing the information for the census regions and another containing information for the census regions with Maryland and Virginia separated out. Then we calculate the proportions that moved to each of the cenusus regions and Maryland and Virginia. Then we establish the decades within the dataset.</p>
</div>
<div id="line-graph-of-migration" class="section level2">
<h2>Line Graph of Migration</h2>
<pre class="r"><code>## line graph 
d &lt;- ggplot(stateMigration, aes(x=YEAR, y=propMoved)) + 
  geom_line(aes(group=region,color=region)) + 
  labs(title=&quot;Migration from DC&quot;,y=&quot;Proportion that moved&quot;) +
  theme_classic()

d + scale_color_manual(values=c(&quot;cornflowerblue&quot;, &quot;gold2&quot;, &quot;red&quot;, &quot;blue&quot;, &quot;lightpink&quot;, &quot;dodgerblue&quot;, &quot;seagreen&quot;))</code></pre>
<p><img src="DCMigration_files/figure-html/lineGraph-1.png" width="672" /></p>
<p>This display shows a line graph of migration from DC on decennial years. Maryland and Virginia have been separated out from the southern region because they are the most popular individual states for DC-born individuals to move to.</p>
</div>
<div id="sequence-of-stacked-barplots-each-showing-the-distribution-for-a-single-year" class="section level2">
<h2>Sequence of stacked barplots, each showing the distribution for a single year</h2>
<pre class="r"><code>stateMigration$region &lt;- factor(stateMigration$region, levels = c(&quot;stayed&quot;, &quot;maryland&quot;, &quot;virginia&quot;, &quot;south&quot;, &quot;northeast&quot;, &quot;midwest&quot;, &quot;west&quot;))

ggplot(stateMigration, aes(x = YEAR, y = propMoved, fill = region)) + 
  geom_bar(stat = &quot;identity&quot;)+
  labs(title=&quot;Proportion of Migration from DC&quot;,
       x =&quot;Year&quot;, y = &quot;Porportion Moved&quot;) +
  scale_fill_manual(&quot;legend&quot;, values = c(&quot;stayed&quot; = &quot;lightpink&quot;, &quot;midwest&quot; = &quot;gold2&quot;, &quot;south&quot; = &quot;blue&quot;, &quot;virginia&quot;=&quot;dodgerblue&quot;, &quot;maryland&quot;=&quot;cornflowerblue&quot;, &quot;northeast&quot;=&quot;red&quot;, &quot;west&quot;=&quot;seagreen&quot;))+
  theme_minimal()</code></pre>
<p><img src="DCMigration_files/figure-html/barplot-1.png" width="672" /></p>
<p>This graph displays the proportion of people migrating from DC on decennial years. Note, the data from 1890 is missing. Maryland and Virginia have been separated out.</p>
</div>
<div id="stream-diagram" class="section level2">
<h2>Stream Diagram</h2>
<pre class="r"><code>g &lt;- ggplot(DCMigration,aes(YEAR)) +
  geom_point(data=decade,aes(x=YEAR,y=height),color=&quot;white&quot;)+
  geom_ribbon(aes(ymin=lowHeight,ymax=highHeight,group=region,fill=region),color=&quot;white&quot;)+
  theme_classic()+theme(axis.line.y=element_blank())+
  geom_segment(data=decade, aes(x=YEAR,xend=YEAR),y=0,yend=1,color=&quot;grey90&quot;,alpha=0.1)+
  scale_x_continuous(limits=c(1840,2025),breaks=seq(1850,2000,by=10),name=&quot;&quot;)+
  scale_y_continuous(limits=c(0,1.01),name=&quot;&quot;)+theme(axis.ticks=element_blank(),axis.text.y=element_blank(),axis.line.x=element_blank())

cols &lt;- c(&quot;stayed&quot;=&quot;lightpink&quot;,&quot;west&quot;=&quot;seagreen&quot;,&quot;midwest&quot;=&quot;gold2&quot;,&quot;south&quot;=&quot;blue&quot;,&quot;northeast&quot;=&quot;orchid&quot;)
g &lt;- g + scale_fill_manual(values=cols,guide=F)+labs(title=&quot;Where people born in DC have moved to:&quot;)
# g

ribbonLabels &lt;- c(&quot;Other States in the South&quot;,&quot;Other States in the Northeast&quot;,&quot;Other States in the Midwest&quot;,&quot;Other States in the West&quot;,&quot;Stayed in DC&quot;)
ribbonHeights &lt;- sort(decade[decade$heightType==&quot;midHeight&quot;&amp;decade$YEAR==1920,]$height)
ribbonHeights &lt;- sort(decade[decade$heightType==&quot;midHeight&quot;&amp;decade$YEAR==1920,]$height)
g &lt;- g + annotate(geom=&quot;text&quot;,x=rep(1920,5),y=ribbonHeights,label=ribbonLabels)
# g
DC1900 &lt;- DCMigration[DCMigration$YEAR==1850 &amp; DCMigration$region == &quot;stayed&quot;,]
DC1900height &lt;- (DC1900$highHeight+DC1900$lowHeight)/2
DC2000 &lt;- DCMigration[DCMigration$YEAR==2000 &amp; DCMigration$region == &quot;stayed&quot;,]
DC2000height &lt;- (DC2000$highHeight+DC2000$lowHeight)/2
West2000 &lt;- DCMigration[DCMigration$YEAR==2000 &amp; DCMigration$region == &quot;west&quot;,]
West2000height &lt;- (West2000$highHeight+West2000$lowHeight)/2
Midwest2000 &lt;- DCMigration[DCMigration$YEAR==2000 &amp; DCMigration$region == &quot;midwest&quot;,]
Midwest2000height &lt;- (Midwest2000$highHeight+Midwest2000$lowHeight)/2

g &lt;- g + annotate(geom=&quot;text&quot;,color=&quot;grey40&quot;,x=1850,y=DC1900height,hjust=0,label=paste(round(DC1900$propMoved,2)*100,&quot;%&quot;,sep=&quot;&quot;))+
  annotate(geom=&quot;text&quot;,color=&quot;grey30&quot;,x=2000,y=DC2000height,hjust=1,label=paste(round(DC2000$propMoved,2)*100,&quot;%&quot;,sep=&quot;&quot;))+
  annotate(geom=&quot;text&quot;,color=&quot;grey30&quot;,x=2000,y=West2000height,hjust=1,label=paste(round(West2000$propMoved,2)*100,&quot;%&quot;,sep=&quot;&quot;))+
  annotate(geom=&quot;text&quot;,color=&quot;grey30&quot;,x=2000,y=Midwest2000height,hjust=1,label=paste(round(Midwest2000$propMoved,2)*100,&quot;%&quot;,sep=&quot;&quot;))
g</code></pre>
<p><img src="DCMigration_files/figure-html/stream-1.png" width="672" /></p>
<p>This stream diagram displays how migration from DC to the four census regions has changed between 1850 and 2000.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
